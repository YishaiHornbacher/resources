<style type="text/css">
	@font-face {
		font-family: 'Open Sans Condensed';
		font-style: normal;
		font-weight: 300;
		src: url('./rp.aspx?font=Fonts.OpenSans-CondensedLight.woff') format('woff'), url('./rp.aspx?font=Fonts.OpenSans-CondensedLight.woff2') format('woff2');
	}

	#VIS_ID_CONTAINER #VIS_ID {
		clear: both;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-wrap-table {
		border-collapse: collapse;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-wrap-table td {
		padding: 0;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-gauge {
		display: inline;
		float: left;
		margin: 20px;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-simple-gauge {
		font-family: 'Open Sans Condensed', sans-serif;
		margin: 10px;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-simple-gauge .izenda-vis-gauge-units {
		fill: #A1A1A1;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-linear-gauge {
		font-family: 'Open Sans Condensed', sans-serif;
		font-weight: bold;
		margin: 15px;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-linear-gauge .izenda-vis-gauge-axis path,
	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-linear-gauge .izenda-vis-gauge-axis line {
		fill: none;
		stroke: #000;
		shape-rendering: crispEdges;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-round-gauge .izenda-vis-gauge-background {
		fill: #e1e1e1;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-round-gauge .izenda-vis-gauge-title {
		font-family: Myriad, "Helvetic Neue", Helvetica, Arial;
		text-anchor: middle;
		fill: #A1A1A1;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-round-gauge .izenda-vis-gauge-arc {
		fill: #00c0d8;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-round-gauge .izenda-vis-gauge-label-value {
		fill: #4A4A4A;
		font-family: Myriad, "Helvetic Neue", Helvetica, Arial;
		font-weight: bold;
		cursor: pointer;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-round-gauge .izenda-vis-gauge-label-format-type {
		fill: #A1A1A1;
		font-family: Myriad, "Helvetic Neue", Helvetica, Arial;
		font-weight: bold;
		cursor: pointer;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-trending-gauge {
		fill: #444444;
		font-weight: bold;
		font-family: 'Open Sans Condensed', sans-serif;
		margin: 0 10px 0 0;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-trending-gauge .izenda-vis-gauge-insetBorder {
		fill: #000000;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-trending-gauge .izenda-vis-gauge-outsetBorder {
		fill: none;
		stroke: #bbbbbb;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-trending-gauge .izenda-vis-gauge-insetBorder {
		fill: none;
		stroke: #ffffff;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-trending-gauge .izenda-vis-gauge-area {
		stroke: #629af0;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-trending-gauge .izenda-vis-gauge-area-point {
		fill: #629af0;
		stroke: #6685b5;
		stroke-width: 1px;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-trending-gauge .izenda-vis-gauge-area-bullseye {
		fill: none;
		stroke: #c00000;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-trending-gauge .izenda-vis-gauge-area-bullseye-inner {
		fill: #c00000;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-trending-gauge .izenda-vis-gauge-current-block .izenda-vis-gauge-current-value {
		fill: #4882ff;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-trending-gauge .izenda-vis-gauge-up-direction .izenda-vis-gauge-relative-value,
	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-trending-gauge .izenda-vis-gauge-up-direction .izenda-vis-gauge-relative-arrow {
		fill: #00ac00;
	}

	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-trending-gauge .izenda-vis-gauge-dn-direction .izenda-vis-gauge-relative-value,
	#VIS_ID_CONTAINER #VIS_ID .izenda-vis-trending-gauge .izenda-vis-gauge-dn-direction .izenda-vis-gauge-relative-arrow {
		fill: #ac0000;
	}

	#VIS_ID_CONTAINER .izenda-vis-gauge-tooltip {
		position: absolute;
		text-align: center;
		padding: 4px;
		font-family: Myriad, "Helvetic Neue", Helvetica, Arial;
		font-size: 12px;
		background: #FFFFFF;
		border: 1px solid rgb(173, 173, 173);
		border-radius: 4px;
		pointer-events: none;
	}
</style>


<div id="VIS_ID_CONTAINER">
	<div id="VIS_ID"></div>
</div>

<script type="text/javascript" src="d3.v3.min.js"></script>

<script type="text/javascript" src="gauge.base.js"></script>
<script type="text/javascript" src="gauge.simple.js"></script>
<script type="text/javascript" src="gauge.linear.js"></script>
<script type="text/javascript" src="gauge.round.js"></script>
<script type="text/javascript" src="gauge.trending.js"></script>

<script type="text/javascript">
	(function init() {
		var services = window.ReportingServices;

		(function () {
			/* Backward Compatibility Section */
			if (VIS_CONTEXT.props.length > 2 && VIS_CONTEXT.props && VIS_CONTEXT.props.indexOf('gauge') > 0) {
				var props = {};
				try {
					var oldProps = JSON.parse(VIS_CONTEXT.props);
					var gauge = oldProps['gauge'];
					var styles = {};
					styles['Simple'] = {};
					styles['Simple']['Size'] = gauge['simple']['size'];
					styles['Linear'] = {};
					styles['Linear']['Mode'] = gauge['linear']['mode'];
					styles['Linear']['Size'] = gauge['linear']['size'];
					styles['Round'] = {};
					styles['Round']['Size'] = gauge['round']['size'];
					styles['Round']['Width'] = gauge['round']['width'];
					styles['Trending'] = {};
					styles['Trending']['Size'] = gauge['trending']['size'];
					props['Styles'] = styles;
					props['CurrentStyle'] = gauge['style'];
				} catch (e) {
					props = {};
				}
				VIS_CONTEXT.props = JSON.stringify(props);
			}
		})();

		var sliderEventActive = false;

		var styles = {
			simple: function () {
				return {
					name: "simple",
					initGearGallery: function () {
						var gearGallery = jq$("#VIS_ID_GEAR_GALLERY");
						gearGallery.empty();

						var timeoutId = 0;

						gearGallery.append(jq$("<div></div>").addClass("izenda-vis-property izenda-vis-property-slider")
							.append(jq$("<label>Size</label>").append(jq$("<div></div>").attr("id", "VIS_ID_PROPERTY_SIZE_SLIDER"))));

						jq$("#VIS_ID_PROPERTY_SIZE_SLIDER").slider({
							min: 100,
							max: 450,
							value: vis.getProperty('Styles.Simple.Size'),
						}).on("slide", function (event, ui) {
							clearTimeout(timeoutId);
							timeoutId = setTimeout(function () {
								gauges.forEach(function (gauge) {
									gauge.resize(ui.value);
								});
								wrapGaugesInTable();
							}, 0);
						}).on("slidechange", function (e, o) {
							vis.setProperty('Styles.Simple.Size', o.value);;
						}).on("slidestart", function () {
							sliderEventActive = true;
						}).on("slidestop", function () {
							sliderEventActive = false;
						});
					},
					draw: function (name, data) {
						var gaugeDiv = jq$("<div></div>").addClass("izenda-vis-gauge").addClass("izenda-vis-simple-gauge").css("float", "left");
						jq$("#VIS_ID").append(gaugeDiv);
						var gauge = new izenda.gauges.SimpleGauge(gaugeDiv.get(0), name, vis.getProperty('Styles.Simple.Size'), data);
						gauges.push(gauge);
						gauge.render(!vis.isImageRender);
					},
					postDrawAll: function () {
						wrapGaugesInTable();
					},
					destroy: function () {
						jq$("#VIS_ID").empty();
						gauges = [];
					}
				};
			},
			linear: function () {
				return {
					name: "linear",
					initGearGallery: function () {
						var gearGallery = jq$("#VIS_ID_GEAR_GALLERY");
						gearGallery.empty();

						var linearModeControl = jq$('<div>').addClass('izenda-vis-property izenda-vis-property-buttongroup')
						.append(jq$('<label>').text('Mode'))
						.append(jq$('<ul>')
							.append(jq$('<li>').attr('val', 'horizontal').text('Horizontal'))
							.append(jq$('<li>').attr('val', 'vertical').text('Vertical')));
						linearModeControl.find('li')
							.bind("click", function () {
								if (!jq$(this).hasClass('izenda-selected')) {
									linearModeControl.find('li').removeClass("izenda-selected");
									jq$(this).addClass("izenda-selected");
									var mode = jq$(this).attr('val');
									setTimeout(function () {
										gauges.forEach(function (gauge) { gauge.changeMode(mode); });
										wrapGaugesInTable();
									}, 0);
									vis.setProperty('Styles.Linear.Mode', mode);
								}
							});
						linearModeControl.find('li[val="' + vis.getProperty('Styles.Linear.Mode') + '"]').addClass("izenda-selected");
						gearGallery.append(linearModeControl);

						gearGallery.append(jq$("<div></div>").append(jq$("<div></div>").addClass("izenda-vis-property izenda-vis-property-slider")
							.append(jq$("<label>Size</label>").append(jq$("<div></div>").attr("id", "VIS_ID_PROPERTY_SIZE_SLIDER")))));

						var timeoutId = 0;
						jq$("#VIS_ID_PROPERTY_SIZE_SLIDER").slider({
							min: 200,
							max: 400,
							value: vis.getProperty('Styles.Linear.Size'),
						}).on("slide", function (event, ui) {
							clearTimeout(timeoutId);
							timeoutId = setTimeout(function () {
								gauges.forEach(function (gauge) {
									gauge.resize(ui.value);
								});
								wrapGaugesInTable();
							}, 0);
						}).on("slidechange", function (e, o) {
							vis.setProperty('Styles.Linear.Size', o.value);
						}).on("slidestart", function () {
							sliderEventActive = true;
						}).on("slidestop", function () {
							sliderEventActive = false;
						});
					},
					draw: function (name, data) {
						var gaugeDiv = jq$("<div></div>").addClass("izenda-vis-gauge").addClass("izenda-vis-linear-gauge").css("float", "left");
						jq$("#VIS_ID").append(gaugeDiv);
						var gauge = new izenda.gauges.LinearGauge(gaugeDiv.get(0), name, vis.getProperty('Styles.Linear.Mode'), vis.getProperty('Styles.Linear.Size'), data);
						gauges.push(gauge);
						gauge.render(!vis.isImageRender);
					},
					postDrawAll: function () {
						wrapGaugesInTable();
					},
					destroy: function () {
						jq$("#VIS_ID").empty();
						gauges = [];
					}
				};
			},
			round: function () {
				var diameter = 200,
					gaugesBlock = {},
					gaugesPerBlock = Math.floor(vis.width / (diameter - 30 + 40)) || 1;

				return {
					name: "round",
					initGearGallery: function () {
						var gearGallery = jq$("#VIS_ID_GEAR_GALLERY");
						gearGallery.empty();

						var timeoutId = 0;

						gearGallery.append(jq$("<div></div>").addClass("izenda-vis-property izenda-vis-property-slider")
							.append(jq$("<label>Size</label>").append(jq$("<div></div>").attr("id", "VIS_ID_PROPERTY_SIZE_SLIDER"))));

						jq$("#VIS_ID_PROPERTY_SIZE_SLIDER").slider({
							min: 60,
							max: 360,
							value: vis.getProperty('Styles.Round.Size'),
						}).on("slide", function (event, ui) {
							clearTimeout(timeoutId);
							timeoutId = setTimeout(function () {
								gauges.forEach(function (gauge) {
									gauge.setDegree(ui.value);
								});
							}, 0);
						}).on("slidechange", function (e, o) {
							vis.setProperty('Styles.Round.Size', o.value);
						}).on("slidestart", function() {
							sliderEventActive = true;
						}).on("slidestop", function() {
							sliderEventActive = false;
						});

						gearGallery.append(jq$("<div></div>").addClass("izenda-vis-property izenda-vis-property-slider")
							.append(jq$("<label>Width</label>").append(jq$("<div></div>").attr("id", "VIS_ID_PROPERTY_WIDTH_SLIDER"))));

						jq$("#VIS_ID_PROPERTY_WIDTH_SLIDER").slider({
							min: 1,
							max: 50,
							value: vis.getProperty('Styles.Round.Width'),
						}).on("slide", function (event, ui) {
							clearTimeout(timeoutId);
							timeoutId = setTimeout(function () {
								gauges.forEach(function (gauge) {
									gauge.setTickness(ui.value);
								});
							}, 0);
						}).on("slidechange", function (e, o) {
							vis.setProperty('Styles.Round.Width', o.value);
						}).on("slidestart", function () {
							sliderEventActive = true;
						}).on("slidestop", function () {
							sliderEventActive = false;
						});
					},
					draw: function (name, data) {
						if (gauges.length % gaugesPerBlock == 0) {
							gaugesBlock = jq$("<div></div>").css("float", "left");
							jq$("#VIS_ID").append(gaugesBlock);
						}

						var gaugeDiv = jq$("<div></div>").addClass("izenda-vis-gauge").addClass("izenda-vis-round-gauge");
						gaugesBlock.append(gaugeDiv);

						var gauge = new izenda.gauges.RoundGauge(gaugeDiv.get(0), name, vis.getProperty('Styles.Round.Size'), vis.getProperty('Styles.Round.Width'), data);
						gauges.push(gauge);
						gauge.render(!vis.isImageRender);
					},
					postDrawAll: function () { },
					destroy: function () {
						jq$("#VIS_ID").empty();
						gauges = [];
					}
				};
			},
			trending: function () {
				function storeProperties() {
					vis.setProperty('Styles', jq$.extend(vis.getProperty('Styles'), {
						trending: {
							size: jq$('#VIS_ID_PROPERTY_SIZE_SLIDER').slider("option", "value")
						}
					}));
				}

				return {
					name: "trending",
					initGearGallery: function () {
						var gearGallery = jq$("#VIS_ID_GEAR_GALLERY");
						gearGallery.empty();

						var timeoutId = 0;

						gearGallery.append(jq$("<div></div>").addClass("izenda-vis-property izenda-vis-property-slider")
							.append(jq$("<label>Size</label>").append(jq$("<div></div>").attr("id", "VIS_ID_PROPERTY_SIZE_SLIDER"))));

						jq$("#VIS_ID_PROPERTY_SIZE_SLIDER").slider({
							min: 200,
							max: 600,
							value: vis.getProperty('Styles.Trending.Size'),
						}).on("slide", function (event, ui) {
							clearTimeout(timeoutId);
							timeoutId = setTimeout(function () {
								gauges.forEach(function (gauge) {
									gauge.resize(ui.value);
								});
							}, 0);
						}).on("slidechange", function (e, o) {
							vis.setProperty('Styles.Trending.Size', o.value);
						}).on("slidestart", function () {
							sliderEventActive = true;
						}).on("slidestop", function () {
							sliderEventActive = false;
						});
					},
					draw: function (name, data) {
						var gaugeDiv = jq$("<div></div>").addClass("izenda-vis-gauge").addClass("izenda-vis-trending-gauge").css("float", "left");
						jq$("#VIS_ID").append(gaugeDiv);
						var gauge = new izenda.gauges.TrendingGauge(gaugeDiv.get(0), name, vis.getProperty('Styles.Trending.Size'), data);
						gauges.push(gauge);
						gauge.render(!vis.isImageRender);
					},
					postDrawAll: function () {

					},
					destroy: function () {
						jq$("#VIS_ID").empty();
						gauges = [];
					}
				};
			}
		};

		var isDateExist = false;
		for (var i = 0; i < VIS_COLUMNS.length; ++i) {
			if (VIS_COLUMNS[i].type == "DateTime") {
				isDateExist = true;
				break;
			}
		}

		var vis = new izenda.visualization({
			id: 'VIS_ID',
			rows: VIS_ROWS,
			columns: VIS_COLUMNS,
			context: VIS_CONTEXT,
			status: VIS_FORMJSASTATUS,
			requirements: { d3: true, svg: true },
			defaultProperties: {
				CurrentStyle: (isDateExist) ? "trending" : "simple",
				Styles: {
					Simple: {
						Size: 150
					},
					Linear: {
						Mode: "horizontal",
						Size: 200
					},
					Round: {
						Size: 360,
						Width: 5
					},
					Trending: {
						Size: 400
					}
				}
			},
			unlimitedHeight: true
		});

		vis.initHeader({
			selectors: [{
				icon: 'type',
				initPanel: function (panel) {
					var galleryControl = jq$('<div>').addClass('izenda-vis-property');
					var setGalleryControlValue = function (value) {
						galleryControl.find('.izenda-vis-property-gallery-item-active').removeClass('izenda-vis-property-gallery-item-active');
						galleryControl.find('.izenda-vis-property-gallery-item[value=\'' + value + '\']').addClass('izenda-vis-property-gallery-item-active');
					};
					var types = [{
						value: 'simple',
						title: 'Simple Style',
						thumbnail: './rp.aspx?extres=Vis.Gauge.Auto Gauge.images.styles.simple-style.png'
					}, {
						value: 'linear',
						title: 'Linear Style',
						thumbnail: './rp.aspx?extres=Vis.Gauge.Auto Gauge.images.styles.linear-style.png'
					}, {
						value: 'round',
						title: 'Round Style',
						thumbnail: './rp.aspx?extres=Vis.Gauge.Auto Gauge.images.styles.round-style.png'
					}, {
						value: 'trending',
						title: 'Trending Style',
						thumbnail: './rp.aspx?extres=Vis.Gauge.Auto Gauge.images.styles.trending-style.png'
					}];
					jq$.each(types, function (i, type) {
						if (type.value == 'trending' && !isDateExist) {
							return;
						}
						var item = jq$('<div>')
							.attr('index', i)
							.attr('value', type.value)
							.addClass('izenda-vis-property-gallery-item')
							.bind('mousedown', function () {
								setGalleryControlValue(~~jq$(this).attr('index'));
							})
							.bind('click', function () {
								var value = jq$(this).attr("value");
								style.destroy();
								style = styles[value]();
								style.initGearGallery();

								vis.setProperty('CurrentStyle', value);
								setGalleryControlValue(vis.getProperty('CurrentStyle'));
								waitFontFaceOnLoadAndDraw();
							});

						var placeholder = jq$('<div>').addClass('izenda-vis-property-gallery-item-placeholder');
						placeholder.append(jq$('<img>')
							.css({
								'width': '98px',
								'height': '59px'
							})
							.attr("src", type.thumbnail));

						var titlebox = jq$('<a>')
							.attr('title', type.title)
							.attr('href', 'javascript:void(0)')
							.append(placeholder);
						item.append(titlebox);

						galleryControl.append(item);
					});
					setGalleryControlValue(vis.getProperty('CurrentStyle'));

					panel.append(galleryControl);
				},
				visibility: !VIS_CONTEXT.isDashboard || VIS_CONTEXT.showVisPropertiesInDashboards
			}, {
				icon: 'gear',
				initPanel: function (panel) {
					panel.attr('id', 'VIS_ID_GEAR_GALLERY');
				},
				visibility: !VIS_CONTEXT.isDashboard || VIS_CONTEXT.showVisPropertiesInDashboards
			}]
		});

		var style, gauges = [];

		style = styles[vis.getProperty('CurrentStyle')]();
		style.initGearGallery();

		function wrapGaugesInTable() {

			if (jq$("#VIS_ID").get(0).offsetWidth == 0) {
				return;
			}

			var w0 = 0, i0 = 1;
			for (var i = 0; i < gauges.length && (w0 + gauges[i].parent.offsetWidth <= vis.width) ; ++i) {
				w0 += gauges[i].parent.offsetWidth + 20;
				i0 = i + 1;
			}

			for (var j = i0; j >= 0; --j) {
				var rowsCount = Math.ceil(gauges.length / j);
				var gaugesTable = jq$("<table></table>").addClass("izenda-vis-wrap-table");
				for (var k = 0; k < rowsCount; ++k) {
					var tr = jq$("<tr></tr>");
					for (var l = 0; l < ((k + 1 != rowsCount || gauges.length % j == 0) ? j : (gauges.length % j)) ; ++l) {
						tr.append(jq$("<td></td>").append(gauges[k * j + l].parent));
					}
					gaugesTable.append(tr);
				}

				jq$("#VIS_ID").empty().append(gaugesTable);

				if (gaugesTable.get(0).offsetWidth <= vis.width || j == 1) {
					break;
				}
			}
		}

		function getProcessedData(node) {
			var data = {};

			data.items = [];

			for (var key in node) {
				switch (key.toLowerCase()) {
					case "units":
						data.units = { value: node[key] };
						break;
				}
			}

			for (var key in node.support) {
				var origin = node.support[key].o,
					formatted = node.support[key].f;

				if (VIS_COLUMNS.find(function (d) { return d.name == key; }).format == "MoneyDividedByHundred")
					origin /= 100;

				switch (key.toLowerCase()) {
					case "low":
						data.low = { name: "low", value: origin, color: "#00C000" };
						break;
					case "high":
						data.high = { name: "high", value: origin, color: "#C00000" };
						break;
					case "target":
						data.target = { name: "target", value: origin, color: "#0034ff" };
						break;
					case "max":
						data.max = {
							value: origin,
							format: (function () {
								var precisionMatch = formatted.match(/(\.)(\d+)/),
									currencyMath = formatted.match(/\$|€|£/);
								return {
									precision: (precisionMatch) ? precisionMatch[2].length : 0,
									isCurrency: currencyMath != null,
									currency: (currencyMath) ? currencyMath[0] : "",
									isPercentage: /%/.test(formatted)
								};
							})()
						};
						break;
					default:
						if (origin instanceof Date) {
							data.date = origin;
						} else if (typeof origin === "number") {
							data.items.push({
								value: origin,
								format: (function () {
									var precisionMatch = formatted.match(/(\.)(\d+)/),
										currencyMath = formatted.match(/\$|€|£/);
									return {
										precision: (precisionMatch) ? precisionMatch[2].length : 0,
										isCurrency: currencyMath != null,
										currency: (currencyMath) ? currencyMath[0] : "",
										isPercentage: /%/.test(formatted)
									};
								})()
							});
						}
						break;
				}
			}

			return data;
		}

		function drawAllGauges() {
			if (vis.getItems().length == 0) {
				return;
			}

			if (style.name == "trending") {
				var items = {};
				jq$.each(vis.getItems(), function (index, item) {
					var name = vis.cellValue(index, 0, false);
					if (!items[name]) {
						items[name] = [];
					}

					var data = getProcessedData(item);
					if (data.date) {
						items[name].push(data);
					}
				});

				for (var key in items) {
					var values = items[key];

					if (values.length > 1) {
						style.draw(key, values);
					}
				}
			} else {
				jq$.each(vis.getItems(), function (index, item) {
					var name = vis.cellValue(index, 0, false);
					style.draw(name, getProcessedData(item));
				});
			}
			style.postDrawAll();
		}

		function waitFontFaceOnLoadAndDraw() {
			if ((style.name == "simple" || style.name == "linear" || style.name == "trending") && !vis.isImageRender) {
				FontFaceOnload('Open Sans Condensed', {
					success: function () {
						try {
							drawAllGauges();
						} catch (err) {
							var gaugeDiv = jq$("<div></div>")
								.html("Error: " + err);
							jq$("#VIS_ID").empty().append(gaugeDiv);
						}
					},
					error: function () {
						var gaugeDiv = jq$("<div></div>")
							.html("Interactive Visualizations are not available: the webfont has not been loaded.");
						jq$("#VIS_ID").empty().append(gaugeDiv);
					},
					timeout: 5000
				});
			} else {
				drawAllGauges();

			}
		}

		waitFontFaceOnLoadAndDraw();

		izenda.visualization.registerResize('VIS_ID', init, vis.clear);
	})();
</script>